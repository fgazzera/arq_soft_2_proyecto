{"ast":null,"code":"/*import React, { useContext, useEffect, useState, useCallback } from 'react';\r\nimport { AuthContext } from './login/auth';\r\nimport './estilo/reservas_cliente.css';\r\n\r\nconst HomePage = () => {\r\n  const [reservations, setReservations] = useState([]);\r\n  const [hotelesFiltrados, setHotelesFiltrados] = useState([]);\r\n  const [hoteles, setHoteles] = useState([]);\r\n  const { isLoggedCliente } = useContext(AuthContext);\r\n  const [hotelFiltrado, setHotelFiltrado] = useState('');\r\n  const [startDateFilter, setStartDateFilter] = useState('');\r\n  const [endDateFilter, setEndDateFilter] = useState('');\r\n\r\n  const getHoteles = useCallback(async () => {\r\n    try {\r\n      const hotelesArray = [];\r\n      for (let i = 0; i < reservations.length; i++) {\r\n        const reserva = reservations[i];\r\n        const request = await fetch(`http://localhost:8090/cliente/hotel/${reserva.hotel_id}`);\r\n        const response = await request.json();\r\n        hotelesArray.push(response);\r\n      }\r\n      setHoteles(hotelesArray);\r\n    } catch (error) {\r\n      console.log(\"No se pudieron obtener los hoteles:\", error);\r\n    }\r\n  }, [reservations]);\r\n\r\n  const getHotelesFiltrados = useCallback(async () => {\r\n    try {\r\n      const hotelesArray = [];\r\n      for (let i = 0; i < reservations.length; i++) {\r\n        const reserva = reservations[i];\r\n        if (reserva.hotel_id === hotelFiltrado) {\r\n          const request = await fetch(`http://localhost:8090/cliente/hotel/${reserva.hotel_id}`);\r\n          const response = await request.json();\r\n          hotelesArray.push(response);\r\n        }\r\n      }\r\n      setHotelesFiltrados(hotelesArray);\r\n    } catch (error) {\r\n      console.log(\"No se pudieron obtener los hoteles:\", error);\r\n    }\r\n  }, [reservations, hotelFiltrado]);\r\n\r\n  const getReservations = useCallback(async () => {\r\n    if (isLoggedCliente) {\r\n      const accountId = localStorage.getItem(\"id_cliente\");\r\n      try {\r\n        const request = await fetch(`http://localhost:8090/cliente/reservas/${accountId}`);\r\n        const response = await request.json();\r\n        setReservations(response);\r\n      } catch (error) {\r\n        console.log(\"No se pudieron obtener las reservas:\", error);\r\n      }\r\n    } else {\r\n      window.location.href = '/';\r\n    }\r\n  }, [isLoggedCliente]);\r\n\r\n  useEffect(() => {\r\n    getReservations();\r\n  }, [getReservations]);\r\n\r\n  useEffect(() => {\r\n    getHoteles();\r\n  }, [getHoteles]);\r\n  \r\n  useEffect(() => {\r\n    getHotelesFiltrados();\r\n  }, [getHotelesFiltrados]);\r\n\r\n  const handleHotelFiltradoChange = (event) => {\r\n    alert(\"Hola\");\r\n    setHotelFiltrado(event.target.value);\r\n  };\r\n\r\n  const handleStartDateFilterChange = (event) => {\r\n    setStartDateFilter(event.target.value);\r\n  };\r\n\r\n  const handleEndDateFilterChange = (event) => {\r\n    setEndDateFilter(event.target.value);\r\n  };\r\n\r\n  // Obtener una lista de nombres de hoteles Ãºnicos\r\n  const uniqueHotelNames = Array.from(new Set(hoteles.map((hotel) => hotel.nombre)));\r\n\r\n  const filteredReservations = reservations.filter((reservation) => {\r\n    const hotel = hoteles.find((hotel) => hotel.id === reservation.hotel_id);\r\n    const hotelName = hotel ? hotel.nombre : 'Hotel desconocido';\r\n    const startDate = new Date(reservation.anio_inicio, reservation.mes_inicio - 1, reservation.dia_inicio - 1);\r\n    const endDate = new Date(reservation.anio_final, reservation.mes_final - 1, reservation.dia_final - 1);\r\n\r\n    // Aplicar filtros\r\n    const hotelFilterMatch = !hotelFilter.isFiltering || hotelName === hotelFilter.selectedHotel;\r\n    const startDateFilterMatch = startDateFilter === '' || startDate >= new Date(startDateFilter);\r\n    const endDateFilterMatch = endDateFilter === '' || endDate <= new Date(endDateFilter);\r\n\r\n    return hotelFilterMatch && startDateFilterMatch && endDateFilterMatch;\r\n  });\r\n\r\n  return (\r\n    <div className=\"reservations-container1\">\r\n      <div className=\"reservations-container2\">\r\n        <div className=\"filters-container\">\r\n          <div>\r\n            <label htmlFor=\"hotelFilter\">Hotel:</label>\r\n            <ul id=\"hotelFilter\">\r\n              <li value=\"\" onClick={handleHotelFiltradoChange}>Todos los hoteles</li>\r\n              {hoteles.map((hotel) => (\r\n                <li key={hotel.id} value={hotel.id} onClick={handleHotelFiltradoChange}>\r\n                  {hotel.nombre}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"startDateFilter\">Fecha de inicio:</label>\r\n            <input type=\"date\" id=\"startDateFilter\" value={startDateFilter} onChange={handleStartDateFilterChange} />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"endDateFilter\">Fecha de fin:</label>\r\n            <input type=\"date\" id=\"endDateFilter\" value={endDateFilter} onChange={handleEndDateFilterChange} />\r\n          </div>\r\n        </div>\r\n        <h4>Datos de tus reservas:</h4>\r\n        {reservations.length ? (\r\n          reservations.map((reservation) => {\r\n            const hotel = hotelesFiltrados.find((hotel) => hotel.id === reservation.hotel_id);\r\n            const fechaInicio = `${reservation.dia_inicio}/${reservation.mes_inicio}/${reservation.anio_inicio}`;\r\n            const fechaFin = `${reservation.dia_final}/${reservation.mes_final}/${reservation.anio_final}`;\r\n            return (\r\n              <div className=\"reservation-card\" key={reservation.ID}>\r\n                <p>Hotel: {hotel ? hotel.nombre : 'Hotel desconocido'}</p>\r\n                <p>Fecha de llegada: {fechaInicio}</p>\r\n                <p>Fecha de fin: {fechaFin}</p>\r\n                <p>Gracias por elegirnos!</p>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <p>No tienes reservas</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*import React, { useContext, useEffect, useState, useCallback } from 'react';\r\nimport { AuthContext } from './login/auth';\r\nimport './estilo/reservas_cliente.css';\r\n\r\nconst HomePage = () => {\r\n  const [reservations, setReservations] = useState([]);\r\n  const [hoteles, setHoteles] = useState([]);\r\n  const { isLoggedCliente } = useContext(AuthContext);\r\n\r\n  const getHoteles = useCallback(async () => {\r\n    try {\r\n      const hotelesArray = [];\r\n      for (let i = 0; i < reservations.length; i++) {\r\n        const reserva = reservations[i];\r\n        const request = await fetch(`http://localhost:8090/cliente/hotel/${reserva.hotel_id}`);\r\n        const response = await request.json();\r\n        hotelesArray.push(response);\r\n      }\r\n      setHoteles(hotelesArray);\r\n    } catch (error) {\r\n      console.log(\"No se pudieron obtener los hoteles:\", error);\r\n    }\r\n  }, [reservations]);\r\n\r\n  const getReservations = useCallback(async () => {\r\n    if (isLoggedCliente) {\r\n      const accountId = localStorage.getItem(\"id_cliente\");\r\n      try {\r\n        const request = await fetch(`http://localhost:8090/cliente/reservas/${accountId}`);\r\n        const response = await request.json();\r\n        setReservations(response);\r\n      } catch (error) {\r\n        console.log(\"No se pudieron obtener las reservas:\", error);\r\n      }\r\n    } else {\r\n      window.location.href = '/';\r\n    }\r\n  }, [isLoggedCliente]);\r\n\r\n  useEffect(() => {\r\n    getReservations();\r\n  }, [getReservations]);\r\n\r\n  useEffect(() => {\r\n    getHoteles();\r\n  }, [getHoteles]); // Se agrega getHoteles como dependencia separada\r\n\r\n  return (\r\n    <div className=\"reservations-container1\">\r\n      <div className=\"reservations-container2\">\r\n        <h4>Datos de tus reservas:</h4>\r\n        {reservations.length ? (\r\n          reservations.map((reservation) => {\r\n            const hotel = hoteles.find((hotel) => hotel.id === reservation.hotel_id);\r\n            const fechaInicio = `${reservation.dia_inicio}/${reservation.mes_inicio}/${reservation.anio_inicio}`;\r\n            const fechaFin = `${reservation.dia_final}/${reservation.mes_final}/${reservation.anio_final}`;\r\n            return (\r\n              <div className=\"reservation-card\" key={reservation.ID}>\r\n                <p>Hotel: {hotel ? hotel.nombre : 'Hotel desconocido'}</p>\r\n                <p>Fecha de llegada: {fechaInicio}</p>\r\n                <p>Fecha de fin: {fechaFin}</p>\r\n                <p>Gracias por elegirnos!</p>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <p>No tienes reservas</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;*/","map":{"version":3,"names":[],"sources":["C:/Users/tomig/OneDrive/Escritorio/Visual_Studio_Code/Arquitectura_De_Software_I/arqsoft/Proyecto/frontend/client/src/pages/reservas_cliente.jsx"],"sourcesContent":["/*import React, { useContext, useEffect, useState, useCallback } from 'react';\r\nimport { AuthContext } from './login/auth';\r\nimport './estilo/reservas_cliente.css';\r\n\r\nconst HomePage = () => {\r\n  const [reservations, setReservations] = useState([]);\r\n  const [hotelesFiltrados, setHotelesFiltrados] = useState([]);\r\n  const [hoteles, setHoteles] = useState([]);\r\n  const { isLoggedCliente } = useContext(AuthContext);\r\n  const [hotelFiltrado, setHotelFiltrado] = useState('');\r\n  const [startDateFilter, setStartDateFilter] = useState('');\r\n  const [endDateFilter, setEndDateFilter] = useState('');\r\n\r\n  const getHoteles = useCallback(async () => {\r\n    try {\r\n      const hotelesArray = [];\r\n      for (let i = 0; i < reservations.length; i++) {\r\n        const reserva = reservations[i];\r\n        const request = await fetch(`http://localhost:8090/cliente/hotel/${reserva.hotel_id}`);\r\n        const response = await request.json();\r\n        hotelesArray.push(response);\r\n      }\r\n      setHoteles(hotelesArray);\r\n    } catch (error) {\r\n      console.log(\"No se pudieron obtener los hoteles:\", error);\r\n    }\r\n  }, [reservations]);\r\n\r\n  const getHotelesFiltrados = useCallback(async () => {\r\n    try {\r\n      const hotelesArray = [];\r\n      for (let i = 0; i < reservations.length; i++) {\r\n        const reserva = reservations[i];\r\n        if (reserva.hotel_id === hotelFiltrado) {\r\n          const request = await fetch(`http://localhost:8090/cliente/hotel/${reserva.hotel_id}`);\r\n          const response = await request.json();\r\n          hotelesArray.push(response);\r\n        }\r\n      }\r\n      setHotelesFiltrados(hotelesArray);\r\n    } catch (error) {\r\n      console.log(\"No se pudieron obtener los hoteles:\", error);\r\n    }\r\n  }, [reservations, hotelFiltrado]);\r\n\r\n  const getReservations = useCallback(async () => {\r\n    if (isLoggedCliente) {\r\n      const accountId = localStorage.getItem(\"id_cliente\");\r\n      try {\r\n        const request = await fetch(`http://localhost:8090/cliente/reservas/${accountId}`);\r\n        const response = await request.json();\r\n        setReservations(response);\r\n      } catch (error) {\r\n        console.log(\"No se pudieron obtener las reservas:\", error);\r\n      }\r\n    } else {\r\n      window.location.href = '/';\r\n    }\r\n  }, [isLoggedCliente]);\r\n\r\n  useEffect(() => {\r\n    getReservations();\r\n  }, [getReservations]);\r\n\r\n  useEffect(() => {\r\n    getHoteles();\r\n  }, [getHoteles]);\r\n  \r\n  useEffect(() => {\r\n    getHotelesFiltrados();\r\n  }, [getHotelesFiltrados]);\r\n\r\n  const handleHotelFiltradoChange = (event) => {\r\n    alert(\"Hola\");\r\n    setHotelFiltrado(event.target.value);\r\n  };\r\n\r\n  const handleStartDateFilterChange = (event) => {\r\n    setStartDateFilter(event.target.value);\r\n  };\r\n\r\n  const handleEndDateFilterChange = (event) => {\r\n    setEndDateFilter(event.target.value);\r\n  };\r\n\r\n  // Obtener una lista de nombres de hoteles Ãºnicos\r\n  const uniqueHotelNames = Array.from(new Set(hoteles.map((hotel) => hotel.nombre)));\r\n\r\n  const filteredReservations = reservations.filter((reservation) => {\r\n    const hotel = hoteles.find((hotel) => hotel.id === reservation.hotel_id);\r\n    const hotelName = hotel ? hotel.nombre : 'Hotel desconocido';\r\n    const startDate = new Date(reservation.anio_inicio, reservation.mes_inicio - 1, reservation.dia_inicio - 1);\r\n    const endDate = new Date(reservation.anio_final, reservation.mes_final - 1, reservation.dia_final - 1);\r\n\r\n    // Aplicar filtros\r\n    const hotelFilterMatch = !hotelFilter.isFiltering || hotelName === hotelFilter.selectedHotel;\r\n    const startDateFilterMatch = startDateFilter === '' || startDate >= new Date(startDateFilter);\r\n    const endDateFilterMatch = endDateFilter === '' || endDate <= new Date(endDateFilter);\r\n\r\n    return hotelFilterMatch && startDateFilterMatch && endDateFilterMatch;\r\n  });\r\n\r\n  return (\r\n    <div className=\"reservations-container1\">\r\n      <div className=\"reservations-container2\">\r\n        <div className=\"filters-container\">\r\n          <div>\r\n            <label htmlFor=\"hotelFilter\">Hotel:</label>\r\n            <ul id=\"hotelFilter\">\r\n              <li value=\"\" onClick={handleHotelFiltradoChange}>Todos los hoteles</li>\r\n              {hoteles.map((hotel) => (\r\n                <li key={hotel.id} value={hotel.id} onClick={handleHotelFiltradoChange}>\r\n                  {hotel.nombre}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"startDateFilter\">Fecha de inicio:</label>\r\n            <input type=\"date\" id=\"startDateFilter\" value={startDateFilter} onChange={handleStartDateFilterChange} />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"endDateFilter\">Fecha de fin:</label>\r\n            <input type=\"date\" id=\"endDateFilter\" value={endDateFilter} onChange={handleEndDateFilterChange} />\r\n          </div>\r\n        </div>\r\n        <h4>Datos de tus reservas:</h4>\r\n        {reservations.length ? (\r\n          reservations.map((reservation) => {\r\n            const hotel = hotelesFiltrados.find((hotel) => hotel.id === reservation.hotel_id);\r\n            const fechaInicio = `${reservation.dia_inicio}/${reservation.mes_inicio}/${reservation.anio_inicio}`;\r\n            const fechaFin = `${reservation.dia_final}/${reservation.mes_final}/${reservation.anio_final}`;\r\n            return (\r\n              <div className=\"reservation-card\" key={reservation.ID}>\r\n                <p>Hotel: {hotel ? hotel.nombre : 'Hotel desconocido'}</p>\r\n                <p>Fecha de llegada: {fechaInicio}</p>\r\n                <p>Fecha de fin: {fechaFin}</p>\r\n                <p>Gracias por elegirnos!</p>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <p>No tienes reservas</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*import React, { useContext, useEffect, useState, useCallback } from 'react';\r\nimport { AuthContext } from './login/auth';\r\nimport './estilo/reservas_cliente.css';\r\n\r\nconst HomePage = () => {\r\n  const [reservations, setReservations] = useState([]);\r\n  const [hoteles, setHoteles] = useState([]);\r\n  const { isLoggedCliente } = useContext(AuthContext);\r\n\r\n  const getHoteles = useCallback(async () => {\r\n    try {\r\n      const hotelesArray = [];\r\n      for (let i = 0; i < reservations.length; i++) {\r\n        const reserva = reservations[i];\r\n        const request = await fetch(`http://localhost:8090/cliente/hotel/${reserva.hotel_id}`);\r\n        const response = await request.json();\r\n        hotelesArray.push(response);\r\n      }\r\n      setHoteles(hotelesArray);\r\n    } catch (error) {\r\n      console.log(\"No se pudieron obtener los hoteles:\", error);\r\n    }\r\n  }, [reservations]);\r\n\r\n  const getReservations = useCallback(async () => {\r\n    if (isLoggedCliente) {\r\n      const accountId = localStorage.getItem(\"id_cliente\");\r\n      try {\r\n        const request = await fetch(`http://localhost:8090/cliente/reservas/${accountId}`);\r\n        const response = await request.json();\r\n        setReservations(response);\r\n      } catch (error) {\r\n        console.log(\"No se pudieron obtener las reservas:\", error);\r\n      }\r\n    } else {\r\n      window.location.href = '/';\r\n    }\r\n  }, [isLoggedCliente]);\r\n\r\n  useEffect(() => {\r\n    getReservations();\r\n  }, [getReservations]);\r\n\r\n  useEffect(() => {\r\n    getHoteles();\r\n  }, [getHoteles]); // Se agrega getHoteles como dependencia separada\r\n\r\n  return (\r\n    <div className=\"reservations-container1\">\r\n      <div className=\"reservations-container2\">\r\n        <h4>Datos de tus reservas:</h4>\r\n        {reservations.length ? (\r\n          reservations.map((reservation) => {\r\n            const hotel = hoteles.find((hotel) => hotel.id === reservation.hotel_id);\r\n            const fechaInicio = `${reservation.dia_inicio}/${reservation.mes_inicio}/${reservation.anio_inicio}`;\r\n            const fechaFin = `${reservation.dia_final}/${reservation.mes_final}/${reservation.anio_final}`;\r\n            return (\r\n              <div className=\"reservation-card\" key={reservation.ID}>\r\n                <p>Hotel: {hotel ? hotel.nombre : 'Hotel desconocido'}</p>\r\n                <p>Fecha de llegada: {fechaInicio}</p>\r\n                <p>Fecha de fin: {fechaFin}</p>\r\n                <p>Gracias por elegirnos!</p>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <p>No tienes reservas</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;*/"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}